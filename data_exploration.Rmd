---
title: "Data Exploration"
author: "Mira Flynn"
date: "4/6/2022"
output: github_document
  toc: TRUE
---

```{r setup}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

```{r}
df_craters <- read.csv("data/AstroStats_Robbins_Moon.csv")
df_craters %>% head()
```
```{r}
df_craters %>% summary()
```

```{r}
df_craters %>%
  ggplot(aes(x = LAT_ELLI_IMG, y = DIAM_ELLI_ANGLE_IMG)) +
  geom_point(alpha = 0.1) +
  geom_smooth()
```

```{r}
df_craters %>%
  ggplot(aes(x = LAT_ELLI_IMG, y = DIAM_ELLI_ECCEN_IMG)) +
  geom_point(alpha = 0.1) +
  geom_smooth()
```

```{r}
df_craters %>%
  ggplot(aes(x = LAT_ELLI_IMG, y = DIAM_ELLI_MAJOR_IMG)) +
  geom_point(alpha = 0.1) +
  geom_smooth() +
  scale_y_log10()
```


```{r}
df_craters %>%
  ggplot(aes(x = LAT_ELLI_IMG, y = DIAM_ELLI_MINOR_IMG)) +
  geom_point(alpha = 0.1) +
  geom_smooth() +
  scale_y_log10()
```


```{r}
df_craters %>%
  mutate(
    LON_ELLI_IMG = ifelse(LON_ELLI_IMG > 180, LON_ELLI_IMG-360, LON_ELLI_IMG)
  ) %>%
  ggplot(aes(y = LAT_ELLI_IMG, x = LON_ELLI_IMG)) +
  geom_point(alpha = 0.1)
  # geom_smooth()

# WOAH THIS IS SO COOL LOOK AT THIS
# https://www.physics.unlv.edu/~jeffery/astro/moon/map/moon_map_mercator.jpg
```




```{r}
df_craters %>%
  ggplot(aes(LAT_ELLI_IMG)) +
  geom_histogram(bins = 36) +
  scale_x_continuous(breaks = c(-90,-60,-30,0,30,60,90))

# NOTE: This isn't accounting for diameter changes over latitudes
```


```{r}
rad2deg <- function(rad) {(rad * 180) / (pi)}
deg2rad <- function(deg) {(deg * pi) / (180)}
# https://stackoverflow.com/questions/32370485/convert-radians-to-degree-degree-to-radians

# r = Radius of Moon
r <- 1737.4*1000
round_digits = 5

df_craters_hist <- df_craters %>%
  mutate(
    LAT_ROUND = floor(LAT_ELLI_IMG/round_digits)*round_digits
  ) %>%
  group_by(LAT_ROUND) %>%
  summarize(
    COUNT_LAT_ROUND = n()
  ) %>%
  mutate(
    NORM_LAT_ROUND = 2*pi*r*cos(deg2rad(LAT_ROUND)*COUNT_LAT_ROUND)
  )
df_craters_hist %>% head()
```



```{r}
df_craters_hist %>%
  ggplot(aes(x = LAT_ROUND, y = COUNT_LAT_ROUND)) +
  geom_col(width = round_digits, color = "black")
  
```

```{r}
df_craters_hist %>%
  ggplot(aes(x = LAT_ROUND, y = NORM_LAT_ROUND)) +
  geom_col(width = round_digits, color = "black")
```





